<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>Corleone</title><meta name="author" content="Corleone"><link rel="shortcut icon" href="/img/favicon.png"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><meta name="generator" content="Hexo 6.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Corleone" type="application/atom+xml">
</head><body><header id="page_header"><div class="header_wrap"><div id="blog_name"><a class="blog_title" id="site-name" href="/">Corleone</a></div><button class="menus_icon"><div class="navicon"></div></button><ul class="menus_items"><li class="menus_item"><a class="site-page" href="/#Publications"> Publications</a></li><li class="menus_item"><a class="site-page" href="/"> About</a></li><li class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://phower.me"> Blog</a></li></ul></div></header><main id="page_main"><div class="side-card sticky"><div class="card-wrap" itemscope itemtype="http://schema.org/Person"><div class="author-avatar"><img class="avatar-img" src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/profile.png'" alt="avatar"></div><div class="author-discrip"><h3>Corleone</h3><p class="author-bio">Your biography can be writed down here.</p></div><div class="author-links"><button class="btn m-social-links">Links</button><ul class="social-icons"><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-facebook-square" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-github" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-stack-overflow" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-linkedin" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-weibo" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-weixin" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-qq" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fas fa-envelope" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fas fa-rss" aria-hidden="true"></i></a></li></ul><ul class="social-links"><li><a class="e-social-link" href="/" target="_blank"><i class="fas fa-graduation-cap" aria-hidden="true"></i><span>Google Scholar</span></a></li><li><a class="e-social-link" href="/" target="_blank"><i class="fab fa-orcid" aria-hidden="true"></i><span>ORCID</span></a></li></ul></div><a class="cv-links" href="/attaches/CV.pdf" target="_blank"><i class="fas fa-file-pdf" aria-hidden="true"><span>My Detail CV.</span></i></a></div></div><div class="page" itemscope itemtype="http://schema.org/CreativeWork"><h2 class="page-title">动态规划</h2><article><h1 id="mathcal-DP"><a href="#mathcal-DP" class="headerlink" title="$\mathcal{DP}$"></a>$\mathcal{DP}$</h1><p>循环顺序：阶段、状态、决策；</p>
<p>时间复杂度：状态数量 $\times$ 状态转移的计算量；</p>
<h2 id="一、线性DP"><a href="#一、线性DP" class="headerlink" title="一、线性DP"></a>一、线性DP</h2><h3 id="1-数字三角形模型"><a href="#1-数字三角形模型" class="headerlink" title="1. 数字三角形模型"></a>1. 数字三角形模型</h3><blockquote>
<p>　　　　　　　　　　　　　　　　　　７<br>　　　　　　　　　　　　　　　　　３　８<br>　　　　　　　　　　　　　　　　８　１　０<br>　　　　　　　　　　　　　　　２　７　４　４<br>　　　　　　　　　　　　　　４　５　２　６　５</p>
<p>给定一个数字三角形，如上，在这个三角形中寻找一条从顶部到底边的路径，使得路径上所经过的数字之和最大。路径上的每一步都只能往左下或右下走。求出这个最大和。</p>
</blockquote>
<h3 id="2-最长上升子序列模型"><a href="#2-最长上升子序列模型" class="headerlink" title="2. 最长上升子序列模型"></a>2. 最长上升子序列模型</h3><blockquote>
<p>186 186 150 200 160 130 197 220</p>
<p>1.上升；2.下降；3.先上升后下降；</p>
</blockquote>
<ul>
<li>反链：为一个点的集合，其中所有点两两不可达；</li>
</ul>
<h3 id="3-背包"><a href="#3-背包" class="headerlink" title="3. 背包"></a>3. 背包</h3><h4 id="01背包"><a href="#01背包" class="headerlink" title="01背包"></a>01背包</h4><p>每个物品只有一个</p>
<ul>
<li>求<code>max</code> 给不相干的初始化为<code>-inf</code>;</li>
<li>求<code>min</code> 初始化为<code>inf</code>;</li>
</ul>
<p>==优化滚动数组== </p>
<img src="https://gitee.com/csJager/picture__bed/raw/master/屏幕截图 2021-12-31 221003.png" alt="屏幕截图 2021-12-31 221003" style="zoom: 150%;">

<p>==优化成一维== </p>
<img src="https://gitee.com/csJager/picture__bed/raw/master/屏幕截图 2021-12-31 224701.png" alt="屏幕截图 2021-12-31 224701" style="zoom: 67%;">

<img src="https://gitee.com/csJager/picture__bed/raw/master/屏幕截图 2021-12-31 2245480.png" alt="屏幕截图 2021-12-31 2245480" style="zoom: 67%;">

<blockquote>
<p>01背包始终需要从<code>i-1</code>阶段转移到<code>i</code>阶段！</p>
<p>求方案数只需把 max 换成 + 就🆗了</p>
</blockquote>
<h4 id="完全背包"><a href="#完全背包" class="headerlink" title="完全背包"></a>完全背包</h4><p>每个物品无限个</p>
<p>$f[i][j]=\left{ \begin{matrix}f[i-1][j]，未选过第i个物品\ \ \ \f[i][j-v[i]]，从第i个物品中选一个 \end{matrix} \right.$ </p>
<p>注意到第二步是在当前阶段中转移，优化到一维后不需要倒序</p>
<blockquote>
<p><code>memset(f, 0xcf, sizeof f)</code> 置为-INF（cause溢出了 int 范围）</p>
</blockquote>
<h4 id="多重背包"><a href="#多重背包" class="headerlink" title="多重背包"></a>多重背包</h4><p>每个物品有<code>Ci</code>个</p>
<ol>
<li>==直接拆分法==</li>
</ol>
<p>将每种物品看作独立的<code>Ci</code>个物品，转化为 $\sum_{i=1}^NC_i$ 个物品的<code>0/1</code> 背包问题；</p>
<p>时间复杂度：$\mathcal{O(M*\sum_{i=1}^N C_i)}$ ；</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">for(int i=1; i&lt;=n; i++)
    for(int j=1; j&lt;=c[i]; j++)
        for(int k=m; k&gt;=v[i]; k--)
            f[k] = max(f[k], f[k-v[i]]+w[i]);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="2">
<li>==二进制拆分法==</li>
</ol>
<p>把每种物品拆成 $\log C_i$ 个；</p>
<blockquote>
<p>从 k 个 2 的整数次幂 $2^0,2^1,2^2,…,2^{k-1}$ 中选出若干个相加，可以表示出 $0\sim 2^k-1$之间的任何整数</p>
</blockquote>
<p>假设我们有整数<code>p</code>满足 $2^0+2^1+…+2^p\leq C_i$ ；</p>
<p>令 $R_i=C_i-2^0-2^1-…-2^p$ ；</p>
<ul>
<li>因为 $2^0+2^1+…+2^p=2^{p+1}-1$ ，这些数可以表示 $[0,2^{p+1}-1]$ 范围内的数；</li>
<li>在此基础上加上 $R_i$ 即可表示出 $[R_i,R_i+2^{p+1}-1]$ 之间的整数，而 $R_i+2^{p+1}-1=C_i$ ,故在此基础上可表示出 $[R_i,C_i]$ 中的任何数；</li>
</ul>
<p>由于 $\begin{cases} 2^0+2^1+…+2^p+2^{p+1}&gt;C_i &amp; \ C_i=2^0+2^1+…+2^p+R_i &amp;\end{cases} \Longrightarrow 2^{p+1}&gt;R_i$ ，从而 $R_i\leq2^{p+1}-1$ ，故两个区间没有遗漏的覆盖了 $[0, C_i]$ </p>
<p>综上，我们可以把数量为 $C_i$ 的第<code>i</code> 种物品拆成 <code>p+2</code> 个物品（0~p有p+1个，再加上 Ri）</p>
<ol start="3">
<li>==单调队列==</li>
</ol>
<h4 id="分组背包"><a href="#分组背包" class="headerlink" title="分组背包"></a>分组背包</h4><p>每组物品有很多种，每种一个</p>
<img src="https://gitee.com/csJager/picture__bed/raw/master/屏幕截图 2022-01-04 205909.png" alt="屏幕截图 2022-01-04 205909" style="zoom:67%;">

<h3 id="4-区间DP"><a href="#4-区间DP" class="headerlink" title="4. 区间DP"></a>4. 区间DP</h3><p>阶段：<code>len=r-l+1</code> </p>
<h2 id="二、状态机"><a href="#二、状态机" class="headerlink" title="二、状态机"></a>二、状态机</h2><p>![](<a target="_blank" rel="noopener" href="https://gitee.com/csJager/picture__bed/raw/master/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE">https://gitee.com/csJager/picture__bed/raw/master/屏幕截图</a> 2022-02-04 154523.png)</p>
<h2 id="三、状态压缩DP"><a href="#三、状态压缩DP" class="headerlink" title="三、状态压缩DP"></a>三、状态压缩DP</h2><h3 id="1-棋盘类"><a href="#1-棋盘类" class="headerlink" title="1. 棋盘类"></a>1. 棋盘类</h3><blockquote>
<p>终于知道为什么==棋盘左边==是==二进制低位==了：</p>
<p>因为 遍历二进制数 的方向是从 低—&gt;高</p>
<p>而我们 观察棋盘 是从 左—&gt;右</p>
</blockquote>
<p>第 <code>i-1</code>行状态：a，第<code>i</code>行状态：b；</p>
<ul>
<li><p>判断上下两行没有相邻：<code>a&amp;b==0</code>；</p>
</li>
<li><p>判断左右没有相邻：<code>a|b</code>不能有相邻的1；</p>
<blockquote>
<p>弹幕说也可以判<code>(a&lt;&lt;1&amp;b)==0 &amp;&amp; (a&gt;&gt;1&amp;b)==0</code>，即 是否与右边相邻、是否与左边相邻（左右参考状态 b）</p>
<p>判断自身是否相邻：<code>x&amp;x&gt;&gt;1</code> ；（来自抽风大佬）</p>
</blockquote>
</li>
</ul>
<h3 id="2-集合类"><a href="#2-集合类" class="headerlink" title="2. 集合类"></a>2. 集合类</h3><h2 id="四、区间DP"><a href="#四、区间DP" class="headerlink" title="四、区间DP"></a>四、区间DP</h2><blockquote>
<p>原型题：石子合并</p>
</blockquote>
<ol>
<li>环形区间转化成一条链</li>
<li>记录方案数</li>
<li>和高精度结合</li>
<li>二维区间dp</li>
</ol>
<h2 id="五、数位DP"><a href="#五、数位DP" class="headerlink" title="五、数位DP"></a>五、数位DP</h2><p>预处理处用<code>DP</code> </p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">// 模板
#include &lt;vector&gt;	// 

int l, r;
int f[N][N];

void init() // 左分支的预处理，通常用dp实现
{}

int dp(int n)	// 模板
{
    if(!n) return _;
    
    vector&lt;int&gt; nums;
    while(n) nums.push_back(n%B), n/=B;
    
    int res=0;  // 结果
    int last=0; // 
    for(int i=nums.size()-1; i&gt;=0; i--)
    {
        int x=nums[i];
        
    }
    return res;
}

int main()
{
    init();
    
    cin&gt;&gt;l&gt;&gt;r;
    cout&lt;&lt;dp(r)-dp(l-1)&lt;&lt;endl;
    
    return 0;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://online1.tingclass.net/fy/img/a/accepted1.jpg"></p>
</article></div></main><div class="nav-wrap"><div class="nav"><button class="site-nav"><div class="navicon"></div></button><ul class="nav_items"><li class="nav_item"><a class="nav-page" href="/#Publications"> Publications</a></li><li class="nav_item"><a class="nav-page" href="/"> About</a></li><li class="nav_item"><a class="nav-page" target="_blank" rel="noopener" href="https://phower.me"> Blog</a></li></ul></div><div class="cd-top"><i class="fa fa-arrow-up" aria-hidden="true"></i></div></div><footer id="page_footer"><div class="footer_wrap"><div class="copyright">&copy;2020 - 2022 by Corleone</div><div class="theme-info">Powered by <a target="_blank" href="https://hexo.io" rel="nofollow noopener">Hexo</a> & <a target="_blank" href="https://github.com/PhosphorW/hexo-theme-academia" rel="nofollow noopener">Academia Theme</a></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery-pjax@latest/jquery.pjax.min.js"></script><script src="/js/main.js"></script></body></html>